- コールバックとは？  
```
レコードを作成して保存する一連の流れの間のさまざまな箇所で任意の処理を差し込める。
こういった特定の処理に引っ掛けて別の処理を呼ぶことをコールバックという。
```
<br>
<br>

- 例1  
```rb
#名前にCatが含まれていた場合、"lovely Cat"という文字に置き換える
before_validation do
  self.name = self.name.gsub(/Cat/) do |matched|
    "lovely #{matched}"
  end
end
```
<br>

- 例2  
```rb
#メソッドバージョン
before_validation :add_lovely_to_cat

def add_lovely_to_cat
  self.name = self.name.gsub(/Cat/) do |matched|
    "lovely #{matched}"
  end
end
```
<br>

- 実行結果  
```
irb(main):001:1* Book.create(
irb(main):002:1*   name: "We love Cat",
irb(main):003:1*   publisher: Publisher.find(1),
irb(main):004:1*   price: 999
irb(main):005:0> )
   (0.7ms)  SELECT sqlite_version(*)
  Publisher Load (0.1ms)  SELECT "publishers".* FROM "publishers" WHERE "publishers"."id" = ? LIMIT ?  [["id", 1], ["LIMIT", 1]]
  TRANSACTION (0.1ms)  begin transaction
  Book Create (2.0ms)  INSERT INTO "books" ("name", "price", "created_at", "updated_at", "publisher_id") VALUES (?, ?, ?, ?, ?)  [["name", "We love lovely Cat"], ["price", 999], ["created_at", "2023-03-28 05:39:17.303184"], ["updated_at", "2023-03-28 05:39:17.303184"], ["publisher_id", 1]]
  TRANSACTION (1.2ms)  commit transaction
=> 
#<Book:0x00007f8999a88098
 id: 3,
 name: "We love lovely Cat",
 published_on: nil,
 price: 999,
 created_at: Tue, 28 Mar 2023 05:39:17.303184000 UTC +00:00,
 updated_at: Tue, 28 Mar 2023 05:39:17.303184000 UTC +00:00,
 publisher_id: 1>
```
<br>
<br>

